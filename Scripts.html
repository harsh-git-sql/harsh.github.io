<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SQL Scripts Library</title>

<style>
    body { font-family: Arial; padding: 20px; background: #f5f7fa; }
    h1 { color: #2c3e50; }

    .category, .script-item {
        padding: 12px;
        background: white;
        margin: 10px 0;
        border-radius: 8px;
        border-left: 6px solid #3498db;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .category:hover, .script-item:hover { background: #ecf0f1; }

    #script-list, #script-viewer {
        margin-top: 20px;
        display: none;
    }

    pre {
        background: #1e1e1e;
        color: #dcdcdc;
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        white-space: pre-wrap;
    }

    .back-btn {
        background: #3498db;
        color: white;
        padding: 10px 16px;
        display: inline-block;
        border-radius: 6px;
        cursor: pointer;
        margin-bottom: 15px;
    }
</style>

</head>
<body>

<h1>SQL Script Categories</h1>

<!-- CATEGORY LIST -->
<div id="categories">
    <div class="category" onclick="loadScripts('performance')">Performance</div>
    <div class="category" onclick="loadScripts('maintenance')">Maintenance</div>
    <div class="category" onclick="loadScripts('monitoring')">Monitoring</div>
    <div class="category" onclick="loadScripts('jobs')">Jobs</div>
    <div class="category" onclick="loadScripts('backup_restore')">Backup & Restore</div>
</div>

<!-- SCRIPT LIST -->
<div id="script-list">
    <div class="back-btn" onclick="goBackToCategories()">⬅ Back to Categories</div>
    <h2>Scripts</h2>
    <div id="scripts-container"></div>
</div>

<!-- SCRIPT VIEWER -->
<div id="script-viewer">
    <div class="back-btn" onclick="goBackToScripts()">⬅ Back to Scripts</div>
    <h2>Script Content</h2>
    <pre id="script-content"></pre>
</div>

<script>
    const scriptFiles = {
        performance: ["missing_indexes.sql", "slow_queries.sql"],
        maintenance: ["delete_old_backups.sql", "index_rebuild.sql"],
        monitoring: ["blocking_sessions.sql", "long_running_queries.sql"],
        jobs: ["failed_jobs.sql"],
        backup_restore: ["full_backup.sql", "restore_diff.sql"]
    };

    let currentCategory = "";

    function loadScripts(category) {
        currentCategory = category;
        document.getElementById("categories").style.display = "none";
        document.getElementById("script-viewer").style.display = "none";

        const container = document.getElementById("scripts-container");
        container.innerHTML = "";

        scriptFiles[category].forEach(file => {
            const div = document.createElement("div");
            div.className = "script-item";
            div.innerText = file;
            div.onclick = () => loadScriptContent(category, file);
            container.appendChild(div);
        });

        document.getElementById("script-list").style.display = "block";
    }

    function loadScriptContent(category, file) {
        fetch(`scripts/${category}/${file}`)
            .then(response => response.text())
            .then(content => {
                document.getElementById("script-content").innerText = content;
                document.getElementById("script-list").style.display = "none";
                document.getElementById("script-viewer").style.display = "block";
            });
    }

    function goBackToCa
